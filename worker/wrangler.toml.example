# IOM Weather Worker Configuration Example
#
# Copy this file to wrangler.toml and fill in your own values.
# See CONTRIBUTING.md for setup instructions.

name = "iom-weather"
main = "worker.js"
compatibility_date = "2025-02-11"

# D1 Database
# Create with: wrangler d1 create iom-weather-db
# Then paste your database_id here
[[d1_databases]]
binding = "DB"
database_name = "iom-weather-db"
database_id = "YOUR_D1_DATABASE_ID"

# KV Namespace for rate limiting
# Create with: wrangler kv:namespace create RATE_LIMIT_KV
# Then paste your namespace id here
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "YOUR_KV_NAMESPACE_ID"

# Scheduled trigger - runs at 03:00, 11:00, 19:00 UTC
# Fetches new weather data from the Isle of Man government RSS feed
[triggers]
crons = ["0 3/8 * * *"]

# Enable Workers Logs for observability
[observability]
enabled = true

# Required secrets (set with `wrangler secret put <NAME>`):
#
# LLM_API_KEY - API key for LLM service (default: Venice.ai)
#   Get one at: https://venice.ai/
#   Note: Only Venice.ai has been tested. Other OpenAI-compatible APIs should work but are unverified.
#   Set with: wrangler secret put LLM_API_KEY
#
# Optional secrets for email notifications:
# SMTP2GO_API_KEY - API key for SMTP2Go email service
# NOTIFICATION_EMAIL_TO - Email address to send alerts to
# NOTIFICATION_EMAIL_FROM - Sender email address
